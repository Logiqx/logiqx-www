<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="Author" content="Pi">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Lesson 6: Enhanced directory structure and makefiles</title>
</head>

<body>

<h2>Lesson 6: Enhanced the directory structure and makefiles</h2>

<p><strong>(posted on the list by Logiqx on Oct 1st)</strong> </p>

<p>I have just updated 3 more dats for logiqx.com (FBA, Daphne,
RAINE) and made some improvements to 'Dats' and 'Dats_RC' at the
same time. </p>

<hr>

<p>1) I have created sub-directories for files that relate to a
particular version of each emulator.</p><p>For example: mame.exe,
fba.exe, Nebula drivers, etc.</p>

<p><img src="img/dats.png" width="236" height="556"></p>

<p>Files within these directories are either used for automatic
dat generation, to verify newly created dats or identify ROM
changes in an emulator (all actions are scripted so that you can
see what is possible). Old directories can be deleted when a new
version of the emulator comes out. </p>

<hr>

<p>2) All scripts have been renamed to have a '_' at the
beginning of them (e.g. '_rebuild_all.bat').</p>

<p>With more dats being added to the environment it makes it
easier to find the script when it is above all other files. ;) </p>

<hr>

<p>3) The makefiles now hide the output of DatUtil and MAMEDiff.</p>

<p>Instead, they just output a simple message to say what is
going on. Much easier on the eyes! :) </p>

<hr>

<p>4) The makefiles in 'Dats_RC' are better written, using the
'subst' function to reduce the amount of times that each filename
is included.</p>

<p>This will make 'copy and pasting' much simpler. </p>

<hr>

<p>5) I have created a script called '_check_merging.bat' so that
you can use it. This script uses DatUtil 'fix merging' (-m
option) then compares the result with the original dat. If there
is a difference then it is shown so that we can correct our
master dat.</p>

<p>This highlighted problems a few minor problems that I have now
corrected: </p>

<ul>
    <li>In Viva Nonno I forgot to compliment a CRC of a bad ROM
        (I complimented it in the parent but not in the clone).</li>
    <li>In Daphne one of the 'merge' names was incorrect. </li>
    <li>In MAME, there were a few ROMs that weren't completely
        fixed. Basically, you need to do a 'fix merging' twice to
        guarantee that everything is fixed. I'll explain why
        later! Anyway, I have changed the MAME makefile to do two
        fix merges. </li>
</ul>

<hr>

<p>Finally, because of the changes you should delete your 'Dats'
and 'Dats_RC' directories (back them up if you wish) and replace
them with these: </p>

<ul>
    <li><a href="../download/Dats.zip">Dats.zip</a></li>
    <li><a href="../download/Dats_RC.zip">Dats_RC.zip</a> </li>
</ul>

<p>They include the three new dats (so that you can see what I
have done) and preliminary areas for Laser, Calice and Mimic.
Currently these areas just contain comparison scripts so that we
can see what is new in the emulators but they will be interesting
for you to look at. </p>

<hr>

<p>Got to go out now and won't have access to my e-mail until
tomorrow. I am sure you will manage ok without me though. ;) </p>

<p>Mike (<a href="img/2002-DSC_0301c.jpg">2002-DSC_0301c.jpg</a>
- taken a few weeks ago)</p>
</body>
</html>
