<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<style TYPE="text/css">
<!--
H1 { font-size: 1.5pc }
H2 { font-size: 1pc }
-->
</style>
<title>WinKawaks Dat</title>
</head>

<body bgcolor="#FFFFFF">

<p align="center"><!--#include virtual="/ads/top.shtml" --> </p>

<hr>

<p align="center"><img border="0" src="NebulaDat.gif" width="134" height="40"></p>

<p align="center">Last updated: 30th June 2004</p>

<h1>Overview</h1>

<p>Although Nebula is capable of creating a RomCenter data file itself, the <a href="http://caesar.logiqx.com/">CAESAR</a>
database needs year and manufacturer information to be included. Also, the data
file that is generated by Nebula is not always accurate, thus I have created a
Nebula data file. Although it might
seem a lot of effort to create a data file from scratch it
does have the benefit that it
can be compared against the auto-generated one for spotting ROM errors in Nebula
itself.
</p>

<hr>

<h1>Initial Creation (which won't need to be done again)</h1>

<p>This was done using an old version of DatUtil and the techniques are no
longer relevant. I haven't got the inclination to explain how I would go about
this task now so I will just skip this section and move on to how I update the
data file!</p>

<hr>
<h1>
Data File Updates</h1>
<h2>Identifying Necessary Changes</h2>
<p>DatUtil enables you to convert Nebula drivers into a ClrMamePro or RomCenter
data file. By using this conversion facility, you get something to compare your
data file against. The only thing to bear in mind is that Nebula drivers do not
always list all of the ROMs in clones (where ROMs are available in the
parent) so the data file generated by DatUtil could be missing some ROMs.</p>
<p>I therefore do the comparison with the following batch script:</p>
<pre>@echo off

SET NEBULA_VER=v2.24
SET NEBULA_DAT_VER=v2.24

REM --- Convert drivers into a valid dat
cat %NEBULA_VER%/romdata/*.dat %NEBULA_VER%/romdata/*.DAT &gt;tmp.dat
datutil tmp.dat &gt;nul

REM --- Remove merge information from the 'driver' dat
grep -v &quot; merge &quot; datutil.dat &gt;driver.dat

REM --- Remove merge information from the 'logiqx' dat
grep -v &quot; merge &quot; &quot;Nebula %NEBULA_DAT_VER%.dat&quot; &gt;logiqx.dat

REM --- Compare the 'driver' dat against the 'logiqx' dat
mamediff -v driver.dat logiqx.dat &gt;nul

REM --- Show the log
notepad mamediff.log

REM --- Remove all temporary files that were created
rm -f tmp.dat driver.dat logiqx.dat datutil.dat datutil.log mamediff.log</pre>
<p>This generates output that shows differences between my data file and Nebula.
When my data file is correct, the only differences shown should be games that
are not listed in the drivers: </p>
<pre>------------------------------- Game additions --------------------------------

&gt; Bucky O'Hare (World version EA) [name: bucky]
&gt; Bucky O'Hare (US version UA) [name: buckyua - parent: bucky]
&gt; Dragon World II (Rev 100C, China) [name: dragwld2]
&gt; Knights of Valour (Rev 117) [name: kov]
&gt; Knights of Valour (Rev 115) [name: kov115 - parent: kov]
&gt; Knights of Valour Plus (Rev 119) [name: kovplus - parent: kov]
&gt; Wild West C.O.W. - Boys of Moo Mesa [name: moo]
&gt; Neo-Geo CD [name: neocd]
&gt; Neo-Geo Neo-Geo [name: neogeo]
&gt; Oriental Legend (Rev 126) [name: orlegend]
&gt; Oriental Legend (Rev 112 Earlier) [name: orlegndc - parent: orlegend]
&gt; Oriental Legend (Rev 112) [name: orlegnde - parent: orlegend]
&gt; PGM (Polygame Master) System BIOS [name: pgmbios]
&gt; Neo-Geo Universe BIOS v1.2 [name: uni-bios]&nbsp; </pre>
<p>If any other differences are reported then they need to be rectified by copy and pasting details from the MAME,
Neo-Geo or CPS-2 data files. The new Nebula data file can then loaded into CMPro
and your ROM collection updated to match. After updating your ROM collection, if the
Nebula internal audit
reports all is well then the CMPro data file can be run through DatUtil to create a RomCenter
data file. </p>
<hr>
<h1>Final Notes</h1>
<p>There are a few benefits to maintaining my own data file for Nebula:</p>
<p>1) CAESAR gets its year and manufacturer information.<br>
2) CRC and size errors in Nebula can be spotted and reported to the
author.<br>
3) SHA1 and MD5 checksums can be added to the data file if I wish.<br>
4) The result seems to be more reliable than the RomCenter data file that is
generated by Nebula itself!</p>

</body>
</html>